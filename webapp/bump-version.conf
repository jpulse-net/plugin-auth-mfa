/**
 * @name            jPulse Framework / Plugins / Auth-MFA / WebApp / Bump Version Configuration
 * @tagline         Bump version script configuration for the Auth-MFA Plugin
 * @description     Configuration file for version bumping across plugin files
 * @file            plugins/auth-mfa/webapp/bump-version.conf
 * @version         1.0.1
 * @release         2025-12-09
 * @repository      https://github.com/jpulse-net/plugin-auth-mfa
 * @author          Peter Thoeny, https://twiki.org & https://github.com/peterthoeny/
 * @copyright       2025 Peter Thoeny, https://twiki.org & https://github.com/peterthoeny/
 * @license         BSL 1.1 -- see LICENSE file; for commercial use: team@jpulse.net
 * @genai           20%, Cursor 2.1, Claude Sonnet 4.5
 */

{
    // File patterns to include in version bump
    filePatterns: [
        // Root level
        'README.md',
        'plugin.json',
        'package.json',
        'package-lock.json',

        // Docs directory
        'docs/*.md',
        'docs/**/*.md',

        // Plugin directory
        'webapp/*.conf',
        'webapp/controller/*.js',
        'webapp/model/*.js',
        'webapp/view/*.css',
        'webapp/view/*.js',
        'webapp/view/*.tmpl',
        'webapp/view/**/*.css',
        'webapp/view/**/*.js',
        'webapp/view/**/*.shtml',
        'webapp/view/**/*.tmpl'
    ],

    // File update rules with regex patterns
    fileUpdateRules: [
        {
            pattern: 'README.md',
            replacements: [
                { from: /^(# .* v)[\d.]+(-[a-z]+\.\d+)?/m,
                  to: (version, match, p1) => `${p1}${version}` }
            ]
        },
        {
            pattern: 'plugin.json',
            replacements: [
                {
                    from: /"version": "[\d.]+(-[a-z]+\.\d+)?"/,
                    to: (version) => `"version": "${version}"`
                }
            ]
        },
        {
            pattern: 'package.json',
            replacements: [
                {
                    from: /"version": "[\d.]+(-[a-z]+\.\d+)?"/,
                    to: (version) => `"version": "${version}"`
                }
            ]
        },
        {
            pattern: 'package-lock.json',
            replacements: [
                { from: /"version": "[\d.]+(-[a-z]+\.\d+)?"/,
                    to: (version) => `"version": "${version}"` },
                { from: /("": \{\s+"name": "[^\"]+",\s+"version": ")[\d.]+(-[a-z]+\.\d+)?/,
                    to: (version, match, p1) => `${p1}${version}`, scope: 'version' }
            ]
        },
        {
            pattern: 'docs/*.md',
            replacements: [
                { from: /^(# .* v)[\d.]+(-[a-z]+\.\d+)?/m,
                  to: (version, match, p1) => `${p1}${version}` }
            ]
        },
        {
            pattern: 'docs/**/*.md',
            replacements: [
                { from: /^(# .* v)[\d.]+(-[a-z]+\.\d+)?/m,
                  to: (version, match, p1) => `${p1}${version}` }
            ]
        }
    ],

    // Header update patterns (optional - uses defaults if not specified)
    headerUpdatePatterns: {
        version: /([\*#] @version\s+)[\d.]+(-[a-z]+\.\d+)?/,
        release: /([\*#] @release\s+)[\d-]+/
    }
}

// EOF plugins/auth-mfa/webapp/bump-version.conf
